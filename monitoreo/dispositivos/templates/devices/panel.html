<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

</head>

<body>
    <div class="row">
        <div class="col-3 bg-primary text-white  p-3">
            <h2>{{empresa}}</h2>
        </div>
        <div class="col-9 bg-primary text-white text-center p-3">
            <h2>Panel de Dispositivos</h2>
        </div>
    </div>
    <div class="row text-center">
        <div class="col-6" style="background-color: rgb(176, 176, 176);">
            <h1>
                Lista de Dispositivos
            </h1>
            <form method="get" class="mb-3">
            <label for="categoria">Filtrar por categoría:</label>
            <select name="categoria" id="categoria" class="form-control d-inline w-50">
                <option value="">Todas</option>
                {% for category in categories %}
                    <option value="{{ category.id }}" {% if request.GET.categoria == category.id|stringformat:"s" %}selected{% endif %}>
                        {{ category.name }}
                    </option>
                {% endfor %}
            </select>
            <button type="submit" class="btn btn-primary btn-sm">Filtrar</button>
        </form>
            <ul>
                {% for device in devices %}
                {% if device.organization.name == empresa %}
                <li style="font-size: 20px; text-decoration: none; text-align: left;">
                    {{ device.name }}
                    <a href="{% url 'device' device.id %}" style="font-size: 20px">Detalles</a>
                </li>
                {% endif %}
                {% endfor %}


        </div>
        <div class="col-6">
            <div class="row" style="background-color: rgb(155, 155, 155);">
                <div class="col-12">
                </div>
                <div class="col-12">
                    <h3>Zonas</h3>
                    <ul>
                        {% for zone in zones %}
                        <li>{{ zone.name }} → {{ zone.num_devices }} dispositivos</li>
                        {% endfor %}
                    </ul>

                </div>
                <div class="col-12">
                    <h3>Categoría</h3>
                    <ul>
                        {% for category in categories %}
                        <li style="font-size: 20px;">{{ category.name }}</li>
                        {% endfor %}
                    </ul>

                </div>
                <div class="col-12">
                    <h3>Alertas Semanales</h3>
                    <ul>
                        {% for alert in alerts %}
                        {% if alert.level == "HIGH" %}
                        <li style="font-size:20px; color:rgb(255, 94, 0); font-weight:bold;">{{ alert }}</li>
                        {% elif alert.level == "MID" %}
                        <li style="font-size:20px; color:rgb(221, 255, 0);">{{ alert }}</li>
                        {% else %}
                        <li style="font-size:20px; color:rgb(255, 0, 0);">{{ alert }}</li>
                        {% endif %}
                        {% endfor %}
                    </ul>

                </div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <div class="col-12" style="background-color: rgb(124, 124, 124);">
                    <h3>Consumo</h3>
                    {% for measurement in measurements %}
                    <li style="font-size: 20px;">{{ measurement }}</li>
                    {% endfor %}
                </div>
            </div>
        </div>



</body>

</html>